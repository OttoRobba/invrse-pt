---
layout:     post
title:      Desenvolvimento em tempo real com BrowserSync
date:       2014-12-24 20:00:00
permalink:  desenvolvimento-com-browsersync
categories: 
    - tutorial
comments:   true
image: browsersync
---

A maior vantagem de desenvolver jogos em HTML5 é, sem dúvida, a ubiquidade da plataforma. Eu posso facilmente testar um jogo pra ver se ele funciona no Android - é só abrir o browser, colocar a url e ver o resultado. Mas e se quisermos uma resposta em tempo real, enquanto desenvolvemos? E se tivermos muitos aparelhos diferentes pra testar, como fazer?

![Stay in sync]({{site.baseurl}}/assets/in_sync.png)

###O jeito da era das cavernas

Para acessar seu jogo, normalmente, você precisaria iniciar um servidor, achar a url da sua máquina, abri-lá no browser do aparelho... E quando tiver modificação, teria de atualizar manualmente, um por um. Ugh. Está pensando que isso é o que? Século XIX?

###Browser-Sync ao resgate!

<a href="http://www.browsersync.io/" target="_blank">BrowserSync</a> é uma ferramenta incrível que nos permite testar jogos (e outros aplicativos) com grande facilidade e alto grau de automação. Funciona independentemente de editores específicos então é fácil adicionar ao seu repertório atual de ferramentas.

O primeiro passo é instalar usando-se do npm (gerenciador de pacotes do nodejs) na linha de comando:

    npm install -g browser-sync

Ok, pronto. O que fazer agora? Bom, usando ainda a linha de comando, trafegue até a pasta do seu jogo:

    cd path/to/your/game

Bacana. Agora podemos fazer isso:

    browser-sync start

###Automatizando o servidor

Iniciar um servidor local, abrir o navegador manualmente, digitar a url... Fácil mas fica melhor se automático!

    #Esse comando inicia o servidor e automaticamente abre o navegador
    browser-sync start --server
    
Legal. Você deve ter percebido agora que o resultado desse comando vai apresentar duas urls - uma é a local, que você pode usar na sua própria máquina e a outra é a externa, que você usa para acessar seu jogo com aparelhos externos (celular, tablet, outros computadores, etc...).

###Atualização em tempo real

Essa é uma das coisas mais legais do BrowserSync. Você pode determinar quais arquivos devem ser observador e, conforme esses forem sendo alterados, o navegador atualiza a página sozinho.

Ou seja, se você tiver de testar seu jogo numa table, num celular e num desktop os três serão atualizados ao mesmo tempo.

    #Comanda para observar mudanças no arquivo
    browser-sync start --server --files "main.js"

    #Você pode usar um asterisco como coringa
    #Comanda para observar mudanças em arquivos terminados em js no diretório raíz
    browser-sync start --server --files "*.js"
    
    #Comanda para observar mudanças em todos os arquivos .js, incluindo sub-diretórios
    browser-sync start --server --files "**/*.js"
    
    #Comanda para observar todos os arquivos, recursivamente
    browser-sync start --server --files "**/*.*"
    
    #Você pode usar vírgulas para adicionar outros pontos de observação
    browser-sync start --server --files "**/*.js, **/*.png"
    
###Ponto de início personalizado

Em alguns casos, tal como acontece com o PandaJS, você vai querer que o BrowserSync abra um arquivo diferente do index.html. É possível fazê-lo passando um parâmetro extra:

    #Usando o parâmetro startPath
    browser-sync start --server --startPath "dev.html"
    
###Ghosting

Por padrão o BrowserSync se utiliza de "Ghosting" - ou seja, se você rola pra baixo no celular, o programa rola sozinho no desktop e tablet. Isso não afeta jogos mas é bom ter em mente. Você pode desabilitar isso passando o parâmetro --no-ghost

    browser-sync start --server --no-ghost
    
###Faça do seu jeito

Minha sugestão é <a href="http://www.browsersync.io/docs/command-line/" target="_blank">dar uma lida na interface deles pra linha de comando</a> - é simples e concisa, te dando habilidade de refinar do jeito que melhor te sirva.
