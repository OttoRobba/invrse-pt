<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Cola do Phaser &#8211; invrse - blog de desenvolvimento de jogos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Blog educacional voltado para o desenvolvimento de jogos, incluindo design, programação, ferramentas, técnicas de trabalho e produção.">
    <meta name="author" content="Otto Robba">
    <meta name="keywords" content="game framework, resource">
    <link rel="canonical" href="http://invrse.com.br/cola-phaser">
    <!-- Custom CSS -->
    <!--        <link rel="stylesheet" href=" /css/style.min.css " type="text/css">-->
    <link rel="stylesheet" href=" /css/pixyll.css " type="text/css">

    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300,400' rel='stylesheet' type='text/css'>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

</head>

<body>
  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="http://invrse.com.br" class="left logo"><img src="/assets/logo.png" alt="invrse" class="no-border-radius"/></a>
      <nav class="site-nav right">
        <a href="/sobre/"><i class='fa fa-user'></i><span class="nav"> sobre</span></a>
<a href="/jogos/"><i class='fa fa-gamepad'></i><span class="nav"> jogos</span></a>
<a href="/contrate-me/"><i class='fa fa-heart'></i><span class="nav"> contrate-me!</span></a>

      </nav>
      <div class="clearfix"></div>
    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        <div class="post-header mb2">
    <h1 class="py2 center">Cola do Phaser</h1>
    <p class="post-meta center">Oct 17, 2014</p>
</div>

<article class="post-content">
    <p><a href="http://phaser.io" target="_blank">Phaser</a> - o game framework para HTML5 <a href="/phaser-review">que eu analisei</a> - é bem fácil de user. Mas com uma colinha, fica mais fácil ainda.</p>

<p>Cada parte da cola é associada diretamente com partes da documentação pra facilitar o aprendizado.</p>

<h3 id="criando-um-jogo">Criando um jogo</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Game.html#Game" target="_blank">http://docs.phaser.io/Phaser.Game.html#Game</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Todos os parâmetros são opcionais (e existem outro além desses)</span>
<span class="c1">//Geralmente queremos pelo menos a altura e largura.</span>
<span class="c1">//Lembre-se que essa variável herdará uma série de propriedades e funções.</span>
<span class="kd">var</span> <span class="nx">game</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Game</span><span class="p">(</span><span class="nx">largura</span><span class="p">,</span> <span class="nx">altura</span><span class="p">,</span> <span class="nx">renderizador</span><span class="p">,</span> <span class="s2">&quot;div_pai&quot;</span><span class="p">);</span></code></pre></div>

<h3 id="criando-um-estado-de-jogo-game-state">Criando um estado de jogo (game state)</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.State.html" target="_blank">http://docs.phaser.io/Phaser.State.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">playState</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//Chamada assim que entramos nesse estado</span>
    <span class="p">},</span>

    <span class="nx">preload</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//Recursos que devem ser carregados antes de chamar create()</span>
    <span class="p">},</span>

    <span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//Adicionar sprites, sons, etc...</span>
    <span class="p">},</span>

    <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//Lógica do jogo, colisão, movimento, etc...</span>
    <span class="p">}</span>
<span class="p">};</span></code></pre></div>

<h3 id="gerenciando-estados-de-jogo">Gerenciando estados de jogo</h3>
<p><small>Referência: <a href="http://docs.phaser.io/Phaser.StateManager.html" target="_blank">http://docs.phaser.io/Phaser.StateManager.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">game</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;play&#39;</span><span class="p">,</span> <span class="nx">playState</span><span class="p">);</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;play&#39;</span><span class="p">);</span>

<span class="c1">//O StateManager também tem algumas funções de uso diverso, úteis também para debugging</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Atualmente no estado de jogo: &quot;</span><span class="o">+</span> <span class="nx">game</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">getCurrentState</span><span class="p">());</span></code></pre></div>

<h3 id="ajustar-o-jogo-a-qualquer-tamanho-de-tela">Ajustar o jogo a qualquer tamanho de tela</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.ScaleManager.html" target="_blank">http://docs.phaser.io/Phaser.ScaleManager.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">scaleMode</span> <span class="o">=</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">ScaleManager</span><span class="p">.</span><span class="nx">SHOW_ALL</span><span class="p">;</span>
<span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">pageAlignHorizontally</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">pageAlignVertically</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">setScreenSize</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span></code></pre></div>

<h3 id="usando-globais">Usando globais</h3>

<p><small>Referência: <a href="http://www.html5gamedevs.com/topic/4247-where-to-put-global-var-in-the-basic-template/" target="_blank">http://www.html5gamedevs.com/topic/4247-where-to-put-global-var-in-the-basic-template/</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Declare-as fora que qualquer função</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">global</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">mute</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">score</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">bestScore</span><span class="o">:</span> <span class="mi">100</span>
<span class="p">};</span>

<span class="c1">//Porque aí podemos chamá-las em qualquer estado</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">mute</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">bestScore</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">score</span><span class="p">;</span></code></pre></div>

<h3 id="usando-armazenagem-local">Usando armazenagem local</h3>

<p><small>Referência: <a href="http://www.w3schools.com/html/html5_webstorage.asp" target="_blank">http://www.w3schools.com/html/html5_webstorage.asp</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Só é possível guardar strings</span>
<span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;itemKey&#39;</span><span class="p">,</span> <span class="s1">&#39;myContent&#39;</span><span class="p">);</span>

<span class="c1">//Mas é possível guardar objetos inteiros fazendo isso:</span>
<span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;myObject&#39;</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">myObject</span><span class="p">));</span>

<span class="c1">//Depois que armazenar, é só pedir a string de volta</span>
<span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;itemKey&#39;</span><span class="p">);</span></code></pre></div>

<h3 id="carregado-uma-imagemmsicarecurso">Carregado uma imagem/música/recurso</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Loader.html" target="_blank">http://docs.phaser.io/Phaser.Loader.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">preload</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">game</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;path/to/file.png&#39;</span><span class="p">);</span>
    <span class="nx">game</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">audio</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;path/to/file.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;path/to/file.ogg&#39;</span><span class="p">]);</span>
    <span class="nx">game</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">spritesheet</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;path/to/file&#39;</span><span class="p">,</span> <span class="nx">frameWidth</span><span class="p">,</span> <span class="nx">frameHeight</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<h3 id="definindo-uma-cor-de-fundo">Definindo uma cor de fundo</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Stage.html" target="_blank">http://docs.phaser.io/Phaser.Stage.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Escolhi um azul acizentado</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">&#39;#6d94b5&#39;</span><span class="p">;</span></code></pre></div>

<h3 id="gerando-nmero-aleatrios">Gerando número aleatórios</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.RandomDataGenerator.html" target="_blank">http://docs.phaser.io/Phaser.RandomDataGenerator.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">num</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">rnd</span><span class="p">.</span><span class="nx">integerInRange</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span> <span class="mi">480</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">intNum</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">rnd</span><span class="p">.</span><span class="nx">integer</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">fracNum</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">rnd</span><span class="p">.</span><span class="nx">frac</span><span class="p">();</span>
<span class="c1">//Dentre outras!</span></code></pre></div>

<h3 id="adicionando-objetos-de-jogo">Adicionando objetos de jogo</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.GameObjectFactory.html" target="_blank">http://docs.phaser.io/Phaser.GameObjectFactory.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">create</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//Imagem, sprite, audio e afins são métodos do GameObjectFactory</span>
    <span class="nx">game</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">player</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">sprite</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="nx">frame</span><span class="p">,</span> <span class="nx">group</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<h3 id="reposicionar-a-referncia-de-posicionamento-dum-objeto">Reposicionar a referência de posicionamento dum objeto</h3>

<p><small>Referência: <a href="https://github.com/photonstorm/phaser/wiki/Graphics" target="_blank">https://github.com/photonstorm/phaser/wiki/Graphics</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Objetos tem uma propriedade de âncora</span>
<span class="c1">//Ela vai de 0 (topo esquerdo) até 1 (canto inferior direito)</span>
<span class="c1">//O padrão é 0,0 mas é fácil mudar</span>
<span class="nx">image</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">;</span>
<span class="nx">image</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">//This sets it in the middle</span>
<span class="nx">image</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">setTo</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">);</span></code></pre></div>

<h3 id="escalonar-um-objeto">Escalonar um objeto</h3>

<p><small>Referência: <a href="https://github.com/photonstorm/phaser/wiki/Graphics" target="_blank">https://github.com/photonstorm/phaser/wiki/Graphics</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//A escala dos objetos é 1, por padrão</span>
<span class="c1">//Valores negativos essencialmente espelham o objeto no eixo em questão</span>
<span class="nx">image</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

<span class="c1">//Isso dobra o tamanho do objeto</span>
<span class="nx">image</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">setTo</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span></code></pre></div>

<h3 id="mostrar-uma-imagem">Mostrar uma imagem</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Image.html" target="_blank">http://docs.phaser.io/Phaser.Image.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">create</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">game</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<h3 id="trabalhar-com-sprites">Trabalhar com sprites</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Sprite.html" target="_blank">http://docs.phaser.io/Phaser.Sprite.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">create</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//Atribua-o a uma variável para podermos chamá-lo mais tarde</span>
    <span class="kd">var</span> <span class="nx">sprite</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">sprite</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">);</span>

    <span class="c1">//Agora podemos acessar seus métodos e propriedades</span>
    <span class="nx">sprite</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
    <span class="nx">sprite</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<h3 id="adicionando-e-tocando-animaes">Adicionando e tocando animações</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.AnimationManager.html" target="_blank">http://docs.phaser.io/Phaser.AnimationManager.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">create</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">sprite</span><span class="p">.</span><span class="nx">animations</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">frames</span><span class="p">],</span> <span class="nx">frameRate</span><span class="p">,</span> <span class="nx">loop</span><span class="p">);</span>
    <span class="nx">sprite</span><span class="p">.</span><span class="nx">animations</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">,</span> <span class="nx">loop</span><span class="p">,</span> <span class="nx">killOnComplete</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<h3 id="trabalhando-com-animaes">Trabalhando com animações</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Animation.html" target="_blank">http://docs.phaser.io/Phaser.Animation.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">create</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//Atribua-o a uma variável para podermos chamá-lo mais tarde</span>
    <span class="kd">var</span> <span class="nx">run</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">animations</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">frames</span><span class="p">],</span> <span class="nx">frameRate</span><span class="p">,</span> <span class="nx">loop</span><span class="p">);</span>

    <span class="c1">//O segundo parâmentro é o contexto, geralmente &#39;this&#39;</span>
    <span class="nx">run</span><span class="p">.</span><span class="nx">onStart</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">listener</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">listener</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Você começou a correr!&quot;</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<h3 id="mostrar-texto">Mostrar texto</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Text.html" target="_blank">http://docs.phaser.io/Phaser.Text.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">create</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//Atribua-o a uma variável para podermos chamá-lo mais tarde</span>
    <span class="kd">var</span> <span class="nx">label</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="s2">&quot;texto&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">style</span><span class="p">},</span> <span class="nx">group</span><span class="p">);</span>
    <span class="nx">label</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="s2">&quot;Estou mudando o texto dentro da variável label!&quot;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<h3 id="tweening">Tweening</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Tween.html" target="_blank">http://docs.phaser.io/Phaser.Tween.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Adicionando um sprite exemplo mas dá para usar tweens com quase qualquer coisa</span>
<span class="kd">var</span> <span class="nx">player</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">sprite</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;player&#39;</span><span class="p">);</span>

<span class="nx">game</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">tween</span><span class="p">(</span><span class="nx">player</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">to</span><span class="p">({</span><span class="nx">x</span><span class="o">:</span><span class="mi">500</span><span class="p">},</span> <span class="mi">400</span><span class="p">)</span> <span class="c1">//muda o player.x para 500 num período de 400ms</span>
    <span class="p">.</span><span class="nx">start</span><span class="p">();</span></code></pre></div>

<h3 id="tocar-msica">Tocar música</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Sound.html" target="_blank">http://docs.phaser.io/Phaser.Sound.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">create</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//Atribua-o a uma variável para podermos chamá-lo mais tarde</span>
    <span class="kd">var</span> <span class="nx">music</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">audio</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="nx">volume</span><span class="p">,</span> <span class="nx">loop</span><span class="p">);</span>
    <span class="nx">music</span><span class="p">.</span><span class="nx">loop</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">music</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
<span class="p">}</span></code></pre></div>

<h3 id="trabalhando-com-temporizadores-timers">Trabalhando com temporizadores (timers)</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Timer.html" target="_blank">http://docs.phaser.io/Phaser.Timer.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Três tipos de timers: em loop, evento único, repetir.</span>
<span class="kd">var</span> <span class="nx">looping</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">loop</span><span class="p">(</span><span class="nx">delay</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">once</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">delay</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">repeat</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">repeat</span><span class="p">(</span><span class="nx">delay</span><span class="p">,</span> <span class="nx">repeatCount</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>

<span class="c1">//Você também pode passar mais parâmetros no fim.</span>
<span class="c1">//Eles serão usados como argumentos na callback</span>

<span class="nx">game</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">pause</span><span class="p">(</span><span class="nx">loopingTimer</span><span class="p">);</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">once</span><span class="p">);</span></code></pre></div>

<h3 id="entrada-input">Entrada (input)</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Input.html" target="_blank">http://docs.phaser.io/Phaser.Input.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Input pode vir do mouse, toque, teclado, joysticks, etc...</span>
<span class="c1">//Esse é o objeto pai, com as propriedades que determinam como funciona toda entrada.</span>

<span class="c1">//Configura em um segundo o tempo para um clique duplo</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">doubleTapRate</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>

<span class="c1">//Aumenta o hitbox do toque</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">circle</span> <span class="o">=</span> <span class="mi">66</span><span class="p">;</span></code></pre></div>

<h3 id="entrada-de-mouse-e-toque">Entrada de mouse e toque</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Pointer.html" target="_blank">http://docs.phaser.io/Phaser.Pointer.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">if</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">mousePointer</span><span class="p">.</span><span class="nx">isDown</span><span class="p">())</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Posição X do mouse quando você clicou: &quot;</span><span class="o">+</span><span class="nx">game</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">mousePointer</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<h3 id="entrada-de-teclado">Entrada de teclado</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Keyboard.html" target="_blank">http://docs.phaser.io/Phaser.Keyboard.html</a></small></p>

<p><small>Código das teclas: <a href="http://docs.phaser.io/Keyboard.js.html#sunlight-1-line-557" target="_blank">http://docs.phaser.io/Keyboard.js.html#sunlight-1-line-557</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">if</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">keyboard</span><span class="p">.</span><span class="nx">justReleased</span><span class="p">(</span><span class="nx">Phaser</span><span class="p">.</span><span class="nx">Keyboard</span><span class="p">.</span><span class="nx">SPACEBAR</span><span class="p">,</span> <span class="mi">10000</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Barra de espaço foi pressionada nos últimos 10 segundos.&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">//Assigning Up, Down, Left and Right to a variable</span>
<span class="kd">var</span> <span class="nx">arrow</span> <span class="o">=</span>  <span class="nx">game</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">keyboard</span><span class="p">.</span><span class="nx">createCursorKeys</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">arrow</span><span class="p">.</span><span class="nx">up</span><span class="p">.</span><span class="nx">isDown</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Você está apertando a seta pra cima!&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">//Isso impede que as setas rolem a página</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">keyboard</span><span class="p">.</span><span class="nx">addKeyCapture</span><span class="p">(</span><span class="nx">arrow</span><span class="p">);</span></code></pre></div>

<h3 id="trabalhando-com-grupos">Trabalhando com grupos</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Group.html" target="_blank">http://docs.phaser.io/Phaser.Group.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Lembre-se de atribuir à uma varíavel para poder referenciar mais tarde</span>
<span class="kd">var</span> <span class="nx">enemies</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">group</span><span class="p">();</span>

<span class="c1">//Podemos adicionar um objeto que criamos previamente</span>
<span class="nx">enemies</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">button</span><span class="p">);</span>

<span class="c1">//Ou criar um objeto diretamente no grupo</span>
<span class="nx">enemies</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="s1">&#39;enemy_sprite&#39;</span><span class="p">);</span>

<span class="c1">//Você pode usar setAll para modificar propriedades de todos os membros do grupo</span>
<span class="nx">enemies</span><span class="p">.</span><span class="nx">setAll</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span></code></pre></div>

<h3 id="adicionando-fsica-aos-sprites">Adicionando física aos sprites</h3>
<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Physics.Arcade.html" target="_blank">http://docs.phaser.io/Phaser.Physics.Arcade.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">create</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//Primeiro iniciamos o sistema</span>
    <span class="nx">game</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">startSystem</span><span class="p">(</span><span class="nx">Phaser</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">ARCADE</span><span class="p">);</span>

    <span class="c1">//Depois criamos nossos objetos e ativamos as propriedades físicas neles</span>
    <span class="nx">sprite</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">sprite</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">);</span>
    <span class="nx">game</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">enable</span><span class="p">(</span><span class="nx">sprite</span><span class="p">,</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">ARCADE</span><span class="p">);</span>

    <span class="c1">//Agora nosso sprite tem um objeto body como propriedade</span>
    <span class="nx">sprite</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">velocity</span><span class="p">.</span><span class="nx">setTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
    <span class="nx">sprite</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">bounce</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="mf">0.8</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<h3 id="manejando-colises">Manejando colisões</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Physics.Arcade#collide.html" target="_blank">http://docs.phaser.io/Phaser.Physics.Arcade#collide.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">update</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//Você pode colidir um grupo com ele mesmo</span>
    <span class="nx">game</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">arcade</span><span class="p">.</span><span class="nx">collide</span><span class="p">(</span><span class="nx">sprites</span><span class="p">);</span>

    <span class="c1">//Você pode chamar uma função quando ocorre uma colisão</span>
    <span class="nx">game</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">arcade</span><span class="p">.</span><span class="nx">collide</span><span class="p">(</span><span class="nx">sprites</span><span class="p">,</span> <span class="nx">monsters</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

    <span class="c1">//Você pode checar parâmetros adicionar com uma processCallback</span>
    <span class="c1">//Se essa processCallback for falsa, a colisão não ocorre</span>
    <span class="nx">game</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">arcade</span><span class="p">.</span><span class="nx">collide</span><span class="p">(</span><span class="nx">sprites</span><span class="p">,</span> <span class="nx">monsters</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">processCallback</span><span class="p">);</span>

    <span class="c1">//As seguintes colisões são possíveis:</span>
    <span class="c1">//Sprite vs Sprite ou</span>
    <span class="c1">//Sprite vs Grupo ou</span>
    <span class="c1">//Grupo  vs Grupo ou</span>
    <span class="c1">//Sprite vs Tilemap Layer ou</span>
    <span class="c1">//Grupo  vs Tilemap Layer</span>
<span class="p">}</span></code></pre></div>

<h3 id="cmera">Câmera</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Camera.html" target="_blank">http://docs.phaser.io/Phaser.Camera.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Vamos seguir um míssel pela tela</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">camera</span><span class="p">.</span><span class="nx">follow</span><span class="p">(</span><span class="nx">missile</span><span class="p">);</span>

<span class="c1">//Quando ele explodir, essa função permite zerar a câmera</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">camera</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>

<span class="c1">//Aconteceu algo legal, vamos mover a câmera para lá!</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">camera</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span></code></pre></div>

<h3 id="partculas">Partículas</h3>

<p><small>Referência: <a href="http://docs.phaser.io/Phaser.Particles.Arcade.Emitter.html" target="_blank">http://docs.phaser.io/Phaser.Particles.Arcade.Emitter.html</a></small></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">emitter</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">emitter</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">maxParticles</span><span class="p">);</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">makeParticles</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">);</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">setAlpha</span><span class="p">(</span><span class="nx">min</span><span class="p">,</span> <span class="nx">max</span><span class="p">,</span> <span class="nx">rate</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">yoyo</span><span class="p">);</span>

<span class="c1">//Para usar gravidades com o emissor, inicie o sistema de física</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">startSystem</span><span class="p">(</span><span class="nx">Phaser</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">ARCADE</span><span class="p">);</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">gravity</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span></code></pre></div>

<h3 id="contribua">Contribua!</h3>

<p>Eu gostaria de continuar revisitando essa cola de tempos em tempos - tanto para garantir sua relevância como para ampliá-la e refiná-la.</p>

<p>Eu estou aberto a sugestões, melhorias e correções - ou via <a href="https://github.com/OttoRobba/invrse-pt/blob/gh-pages/_posts/2014-10-17-phaser-cheatsheet.md" target="_blank">gitHub</a> ou nos comentários abaixo.</p>

<p>Gostaria também de saber as opiniões, então aproveite e deixa a sua abaixo!</p>

</article>

<h5 class="share-post">Share this post on:</h5>
<div id="social">
<a class="twitter-button" href="https://twitter.com/intent/tweet?text=Cola do Phaser&url=http://invrse.co/cola-phaser&via=invrse" target="_blank"><i class='fa fa-twitter white'></i></a>

<a class="google-plus-button" href="https://plus.google.com/share?url=http://invrse.com.br/cola-phaser" target="_blank"><i class='fa fa-google-plus white'></i></a>

<a class="facebook-button" href="https://www.facebook.com/sharer/sharer.php?t=Cola do Phaser&u=" target="_blank"><i class='fa fa-facebook white'></i></a></div>



        <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'invrsebrasil'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="p2 wrap">
        <div class="measure mt1 center">
            <div class="float-left-footer">Versificado por <a href="http://ottorobba.com">Otto Robba</a>
            </div>
            <div class="float-right-footer">
                <ul class="icons-footer">
                    <li class="icons-footer list-style-none">
                        <a href="https://github.com/OttoRobba"><i class='fa fa-github'></i></a>
                    </li>
                    <li class="icons-footer list-style-none">
                        <a href="https://twitter.com/invrse"><i class='fa fa-twitter'></i></a>
                    </li>
                    <li class="icons-footer list-style-none">
                        <a href=" /feed.xml "><i class='fa fa-rss '></i></a>
                    </li>
                </ul>

            </div>
        </div>
    </div>
</footer>


<script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-55865997-1', 'auto');
    ga('send', 'pageview');
</script>


</body>
</html>
