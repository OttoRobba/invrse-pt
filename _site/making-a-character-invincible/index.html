<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Making a character invincible &#8211; invrse - the game development blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Educational blog on game design and development, including topics like programming, tools, workflow and techniques.">
    <meta name="author" content="Otto Robba">
    <meta name="keywords" content="phaser, tutorial">
    <link rel="canonical" href="http://invrse.co/making-a-character-invincible">
    <!-- Custom CSS -->
    <!--        <link rel="stylesheet" href=" /css/style.min.css " type="text/css">-->
    <link rel="stylesheet" href=" /css/pixyll.css " type="text/css">

    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

</head>

<body>
  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="http://invrse.co" class="left logo"><img src="/assets/logo.png" alt="invrse" class="no-border-radius"/></a>
      <nav class="site-nav right">
        <a href="/about/"><i class='fa fa-user'></i><span class="nav"> about</span></a>
<a href="/games/"><i class='fa fa-gamepad'></i><span class="nav"> games</span></a>
<a href="/hire-me/"><i class='fa fa-heart'></i><span class="nav"> hire me!</span></a>

      </nav>
      <div class="clearfix"></div>
    </div>
  </div>
</header>

    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        <div class="post-header mb2">
    <h1 class="py2 center">Making a character invincible</h1>
    <p class="post-meta center">Oct 29, 2014</p>
</div>

<article class="post-content">
    <p>Earlier this month I helped answer a user back on the HTML5 GameDev forums <a href="http://www.html5gamedevs.com/topic/9970-invincible-for-a-while-when-you-hit/#entry58847" target="_blank">on how to work with invincibility</a>. I thought it would be an interesting subject to expand upon and thus, this tiny tutorial was born.</p>

<p><img src="/assets/phaser/superman.jpg" alt="Man of steel" /></p>

<h3 id="that-which-cant-be-conquered">That which can’t be conquered</h3>

<p>Being invincible means that, within a given context, someone or something can’t be defeated, destroyed or killed. The first definition is seldom seen in games as losing is an integral part of the experience.</p>

<p>Think of Mario Kart’s star item, with which your character cannot be harmed by shells and other items. While you cannot be <em>destroyed</em> by others you can be <em>defeated</em> as you can still fall, waste time and come in last - therefore the challenge is never removed, the player is only given a temporary bonus.</p>

<p><img src="/assets/phaser/borderlands.jpg" alt="borderlands 2 bee shield immunity" /></p>

<p>In game design, the terms invulnerability and invencibility are often used as synonyms but some games, such as Final Fantasy or Borderlands, allow you to be partially vulnerable (being resistant to certain types of damage).</p>

<h3 id="cant-hit-me-twice">Can’t hit me twice!</h3>

<p>A common type of invincibility comes in the form of preventing further damage to a character after receiving an initial blow. Think of games like Street Rage and BattleToads. This is pretty easy to do with Phaser, normally what I would do, within the player entity file, is this:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">player</span><span class="p">.</span><span class="nx">invincible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">},</span>

<span class="nx">onHit</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">damage</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">player</span><span class="p">.</span><span class="nx">invincible</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//We only damage the player if not invincible</span>
      <span class="nx">player</span><span class="p">.</span><span class="nx">health</span> <span class="o">-=</span> <span class="nx">damage</span><span class="p">;</span>

      <span class="c1">//We now need to make the player invincible</span>
      <span class="nx">player</span><span class="p">.</span><span class="nx">invincible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

      <span class="c1">//and then we add a timer to restore the player to a vulnerable state</span>
      <span class="nx">game</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
           <span class="nx">player</span><span class="p">.</span><span class="nx">invincible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}),</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<h3 id="whos-the-boss">Who’s the boss?</h3>

<p>Some games have this mechanic in more than one place though - a boss that has multiple weak points that can only be hit once every two seconds, little creatures that are invulnerable after taking fire damage, the player being invulnerable after any damage… Our code from before could be adapted to this:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">boss</span><span class="p">.</span><span class="nx">invincible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">//same idea as before</span>
<span class="p">},</span>

<span class="c1">//We refactor onHit so that we can pass a specific entity</span>
<span class="c1">//And pass for how long invulnerability should last</span>
<span class="nx">onHit</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">entity</span><span class="p">,</span> <span class="nx">damage</span><span class="p">,</span> <span class="nx">invulTime</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">entity</span><span class="p">.</span><span class="nx">invincible</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">entity</span><span class="p">.</span><span class="nx">health</span> <span class="o">-=</span> <span class="nx">damage</span><span class="p">;</span>

      <span class="c1">//we toggle invincibility</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">toggleInvincible</span><span class="p">(</span><span class="nx">entity</span><span class="p">);</span>

      <span class="c1">//Just as before, we add a timer to restore vulnerability.</span>
      <span class="c1">//This time, however, we a pass a fourth argument</span>
      <span class="c1">//Which in turn is passed to the toggleInvincible function</span>
      <span class="nx">game</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">invulTime</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">toggleInvincible</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">entity</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">},</span>

<span class="nx">toggleInvincible</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">entity</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">entity</span><span class="p">.</span><span class="nx">invincible</span> <span class="o">=</span> <span class="o">!</span><span class="nx">entity</span><span class="p">.</span><span class="nx">invincible</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>As you can see, this approach is far more flexible (and cleaner!).</p>

<h3 id="did-i-fire-5-timers-or-6">Did I fire 5 timers or 6?</h3>

<p>You can see how easy this is made with Phaser timers, the logic is simple (we are just changing a boolean after some time) and we get great flexibility from it. This code is similar to what you would use to pace the how many shots can be made or when implementing temporary buffs.</p>

<p>Would you implement it differently? Post in the comments below!</p>

</article>



<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'invrse'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="p2 wrap">
        <div class="measure mt1 center">
            <div class="float-left-footer">Versed by <a href="http://ottorobba.com">Otto Robba</a>
            </div>
            <div class="float-right-footer">
                <ul class="icons-footer">
                    <li class="icons-footer list-style-none">
                        <a href="https://github.com/OttoRobba"><i class='fa fa-github'></i></a>
                    </li>
                    <li class="icons-footer list-style-none">
                        <a href="https://twitter.com/invrse"><i class='fa fa-twitter'></i></a>
                    </li>
                    <li class="icons-footer list-style-none">
                        <a href=" /feed.xml "><i class='fa fa-rss '></i></a>
                    </li>
                </ul>

            </div>
        </div>
    </div>
</footer>


<script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-55865997-1', 'auto');
    ga('send', 'pageview');
</script>


</body>
</html>
